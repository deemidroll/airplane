/* Made by deemidroll | 2014 | deemidroll@gmail.com */
!function n(t,e,i){function r(a,s){if(!e[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=e[a]={exports:{}};t[a][0].call(c.exports,function(n){var e=t[a][1][n];return r(e?e:n)},c,c.exports,n,t,e,i)}return e[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({"/Users/Dmitry/projects/helicopter/tech/airplane/node_modules/tween.js/index.js":[function(n,t){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()});var e=e||function(){var n=[];return{REVISION:"14",getAll:function(){return n},removeAll:function(){n=[]},add:function(t){n.push(t)},remove:function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1)},update:function(t){if(0===n.length)return!1;var e=0;for(t=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();e<n.length;)n[e].update(t)?e++:n.splice(e,1);return!0}}}();e.Tween=function(n){var t=n,i={},r={},o={},a=1e3,s=0,u=!1,c=!1,l=!1,d=0,h=null,f=e.Easing.Linear.None,w=e.Interpolation.Linear,p=[],m=null,v=!1,M=null,g=null,I=null;for(var j in n)i[j]=parseFloat(n[j],10);this.to=function(n,t){return void 0!==t&&(a=t),r=n,this},this.start=function(n){e.add(this),c=!0,v=!1,h=void 0!==n?n:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),h+=d;for(var a in r){if(r[a]instanceof Array){if(0===r[a].length)continue;r[a]=[t[a]].concat(r[a])}i[a]=t[a],i[a]instanceof Array==!1&&(i[a]*=1),o[a]=i[a]||0}return this},this.stop=function(){return c?(e.remove(this),c=!1,null!==I&&I.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var n=0,t=p.length;t>n;n++)p[n].stop()},this.delay=function(n){return d=n,this},this.repeat=function(n){return s=n,this},this.yoyo=function(n){return u=n,this},this.easing=function(n){return f=n,this},this.interpolation=function(n){return w=n,this},this.chain=function(){return p=arguments,this},this.onStart=function(n){return m=n,this},this.onUpdate=function(n){return M=n,this},this.onComplete=function(n){return g=n,this},this.onStop=function(n){return I=n,this},this.update=function(n){var e;if(h>n)return!0;v===!1&&(null!==m&&m.call(t),v=!0);var c=(n-h)/a;c=c>1?1:c;var I=f(c);for(e in r){var j=i[e]||0,y=r[e];y instanceof Array?t[e]=w(y,I):("string"==typeof y&&(y=j+parseFloat(y,10)),"number"==typeof y&&(t[e]=j+(y-j)*I))}if(null!==M&&M.call(t,I),1==c){if(s>0){isFinite(s)&&s--;for(e in o){if("string"==typeof r[e]&&(o[e]=o[e]+parseFloat(r[e],10)),u){var x=o[e];o[e]=r[e],r[e]=x}i[e]=o[e]}return u&&(l=!l),h=n+d,!0}null!==g&&g.call(t);for(var P=0,C=p.length;C>P;P++)p[P].start(n);return!1}return!0}},e.Easing={Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return 0===n?0:Math.pow(1024,n-1)},Out:function(n){return 1===n?1:1-Math.pow(2,-10*n)},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){var t,e=.1,i=.4;return 0===n?0:1===n?1:(!e||1>e?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),-(e*Math.pow(2,10*(n-=1))*Math.sin(2*(n-t)*Math.PI/i)))},Out:function(n){var t,e=.1,i=.4;return 0===n?0:1===n?1:(!e||1>e?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*n)*Math.sin(2*(n-t)*Math.PI/i)+1)},InOut:function(n){var t,e=.1,i=.4;return 0===n?0:1===n?1:(!e||1>e?(e=1,t=i/4):t=i*Math.asin(1/e)/(2*Math.PI),(n*=2)<1?-.5*e*Math.pow(2,10*(n-=1))*Math.sin(2*(n-t)*Math.PI/i):e*Math.pow(2,-10*(n-=1))*Math.sin(2*(n-t)*Math.PI/i)*.5+1)}},Back:{In:function(n){var t=1.70158;return n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},InOut:function(n){var t=2.5949095;return(n*=2)<1?.5*n*n*((t+1)*n-t):.5*((n-=2)*n*((t+1)*n+t)+2)}},Bounce:{In:function(n){return 1-e.Easing.Bounce.Out(1-n)},Out:function(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return.5>n?.5*e.Easing.Bounce.In(2*n):.5*e.Easing.Bounce.Out(2*n-1)+.5}}},e.Interpolation={Linear:function(n,t){var i=n.length-1,r=i*t,o=Math.floor(r),a=e.Interpolation.Utils.Linear;return 0>t?a(n[0],n[1],r):t>1?a(n[i],n[i-1],i-r):a(n[o],n[o+1>i?i:o+1],r-o)},Bezier:function(n,t){var i,r=0,o=n.length-1,a=Math.pow,s=e.Interpolation.Utils.Bernstein;for(i=0;o>=i;i++)r+=a(1-t,o-i)*a(t,i)*n[i]*s(o,i);return r},CatmullRom:function(n,t){var i=n.length-1,r=i*t,o=Math.floor(r),a=e.Interpolation.Utils.CatmullRom;return n[0]===n[i]?(0>t&&(o=Math.floor(r=i*(1+t))),a(n[(o-1+i)%i],n[o],n[(o+1)%i],n[(o+2)%i],r-o)):0>t?n[0]-(a(n[0],n[0],n[1],n[1],-r)-n[0]):t>1?n[i]-(a(n[i],n[i],n[i-1],n[i-1],r-i)-n[i]):a(n[o?o-1:0],n[o],n[o+1>i?i:o+1],n[o+2>i?i:o+2],r-o)},Utils:{Linear:function(n,t,e){return(t-n)*e+n},Bernstein:function(n,t){var i=e.Interpolation.Utils.Factorial;return i(n)/i(t)/i(n-t)},Factorial:function(){var n=[1];return function(t){var e,i=1;if(n[t])return n[t];for(e=t;e>1;e--)i*=e;return n[t]=i}}(),CatmullRom:function(n,t,e,i,r){var o=.5*(e-n),a=.5*(i-t),s=r*r,u=r*s;return(2*t-2*e+o+a)*u+(-3*t+3*e-2*o-a)*s+o*r+t}}},t.exports=e},{}],"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/animate.js":[function(n,t){function e(n,t){var i;n=n||Date.now(),e.lastTimeMsec=e.lastTimeMsec||n-1e3/60,i=Math.min(100,n-e.lastTimeMsec),e.id=window.requestAnimationFrame(e),e.lastTimeMsec=n,t&&(e.callback=t),e.callback(i,n,e.id)}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),window.cancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(n){window.clearTimeout(n)}}(),t.exports=e},{}],"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/main.js":[function(n){function t(){I.aspect=window.innerWidth/window.innerHeight,I.updateProjectionMatrix(),y.setSize(window.innerWidth,window.innerHeight)}function e(n,t){var e=512,i=document.createElement("canvas");i.width=e,i.height=e;var r=i.getContext("2d");r.rect(0,0,e,e);var o=r.createLinearGradient(0,0,e,0);return o.addColorStop(0,n),o.addColorStop(.5,t),o.addColorStop(1,n),r.fillStyle=o,r.fill(),i}function i(){var n=document.createElement("div");document.body.appendChild(n),j=new s.Scene,I=new s.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3),I.position.y=0,I.position.z=30,I.up=new s.Vector3(0,1,0),j.add(I),y=new s.WebGLRenderer({antialias:!0}),y.setPixelRatio(window.devicePixelRatio),y.setSize(window.innerWidth,window.innerHeight),y.setClearColor(1056823),n.appendChild(y.domElement),window.addEventListener("resize",t,!1);var i=new s.LoadingManager;i.onProgress=function(n,t,e){console.log(n,t,e)};var r=new s.OBJLoader(i);m=new s.Object3D,r.load("./obj/airplane10.obj",function(n){var t="#F3F3F5",i="#B1B2B6",r=new s.Texture(e(i,t)),o=new s.Texture(e(t,i));r.needsUpdate=!0,o.needsUpdate=!0,n.children[0].material=new s.MeshBasicMaterial({map:r,transparent:!0,side:s.DoubleSide});var a=n.clone();a.children[0].material=new s.MeshBasicMaterial({map:o,transparent:!0,side:s.DoubleSide}),a.position.y=.01,m.add(n),m.add(a),m.scale.set(.05,.05,.05),m.rotation.z=Math.PI,m.rotation.x=Math.PI/12,m.rotation.x+=Math.PI/12,m.rotation.z-=Math.PI/24,m.rotation.y=-Math.PI/6,m.position.x=1,m.position.y=8}),j.add(m);var o=new s.AmbientLight(3424611);j.add(o);var a=new s.PointLight(16777215,.75,500);a.position.set(0,8.3,10),m.add(a)}function r(n,t){var e=n-.5+Math.random()*(t-n+1);return e=Math.round(e)}function o(){var n=new s.Vector3(0,-80,600),t=n.applyMatrix4(m.matrixWorld);I.position.x=t.x,I.position.y=t.y,I.position.z=t.z,I.lookAt(m.position)}var a=window.Detector,s=window.THREE,u=n("tween.js"),c=n("./tweens.js"),l=n("./animate.js"),d=n("./socket.js"),h=window.$;a.webgl||a.addGetWebGLMessage();var f=h(document),w=h("#address"),p=h(".interface");d.init();var m,v=!1,M=!0;f.on("socketInitialized",function(n,t){var e=window.location.origin+"/m/#"+t.gameCode;h(".content-info-qr").qrcode({render:"div",size:150,fill:"#fff",text:e}),w.text(e)});var g={x:0,y:0,z:0};f.on("turn",function(n,t){var e=-t.turn/90,i=t.x;g={x:(i-45)/180,y:2*e,z:Math.PI+e}}),f.on("start",function(){var n=1500;p.addClass("hidden"),v=!0,M=!1,c.start(m,n),setTimeout(function(){M=!0},n)});var I,j,y;i();var x=[],P=s.ImageUtils.loadTexture("./img/noise.jpg"),C=[4456409,16651386,15188108],O=[2,3,4],z=function(){this.geom=new s.SphereGeometry(O[r(0,2)],60,40),this.mat=new s.MeshLambertMaterial({color:C[r(0,2)],map:P}),this.mesh=new s.Mesh(this.geom,this.mat),this.mesh.position.x=r(-100,100),this.mesh.position.y=r(-20,20),this.mesh.position.z=r(-100,-10),j.add(this.mesh)};z.prototype.update=function(){return this.mesh.rotation.y+=.01,this};for(var F=0;20>F;F++)x.push(new z);l(0,function(){v&&M&&(o(),["x","y","z"].forEach(function(n){var t=g[n]-m.rotation[n];m.rotation[n]+=t/10}),m.translateZ(-.1)),x.forEach(function(n){n.update()}),y.render(j,I),u.update()})},{"./animate.js":"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/animate.js","./socket.js":"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/socket.js","./tweens.js":"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/tweens.js","tween.js":"/Users/Dmitry/projects/helicopter/tech/airplane/node_modules/tween.js/index.js"}],"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/socket.js":[function(n,t){var e,i=window.io,r=window.$,o="http://localhost:8080",a={},s=r(document);a.init=function(){console.log(o),e=a.socket=i.connect(o),e.on("welcome",function(){e.emit("device",{type:"game"})}),e.on("initialize",function(n){e.gameCode=n,s.trigger("socketInitialized",{gameCode:n,server:o})}),e.on("connected",function(n){s.trigger("socketConnected",n)}),e.on("turn",function(n){s.trigger("turn",n)}),e.on("click",function(n){console.log("click",n)}),e.on("start",function(n){console.log("start",n),s.trigger("start",n)})},a.sendMessage=function(n){var t={type:n.type,gameCode:e.socket.gameCode,sessionid:e.socket.socket.sessionid};e.socket&&e.socket.emit("message",t)},t.exports=a},{}],"/Users/Dmitry/projects/helicopter/tech/airplane/src/js/tweens.js":[function(n,t){var e=n("tween.js"),i={};i.start=function(n,t){t=t||1500;var i=[15,30,15,0],r=[24,0,-12,0],o=[-15,0,15,0],a=[Math.PI/12,Math.PI/12,Math.PI/12,Math.PI/24],s=[-Math.PI/3,-1.1*Math.PI,-1.5*Math.PI,-2*Math.PI],u=[Math.PI/2,Math.PI/2,Math.PI,Math.PI];new e.Tween(n.position).to({x:i,y:r,z:o},t).interpolation(e.Interpolation.Bezier).easing(e.Easing.Sinusoidal.In).start(),new e.Tween(n.rotation).to({x:a,y:s,z:u},t).interpolation(e.Interpolation.Bezier).easing(e.Easing.Sinusoidal.In).start(),new e.Tween(n.children[1].children[0].material.color).to({r:.30196078431372547,g:.7843137254901961,b:.9764705882352941},t).easing(e.Easing.Sinusoidal.In).start(),new e.Tween(n.children[2].children[0].material.color).to({r:.30196078431372547,g:.7843137254901961,b:.9764705882352941},t).easing(e.Easing.Sinusoidal.In).start()},t.exports=i},{"tween.js":"/Users/Dmitry/projects/helicopter/tech/airplane/node_modules/tween.js/index.js"}]},{},["/Users/Dmitry/projects/helicopter/tech/airplane/src/js/main.js"]);